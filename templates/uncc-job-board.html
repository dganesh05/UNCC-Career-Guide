{% extends 'base.html' %}

{% block content %}
    <section class="hero">
        <h2>Job Board</h2>
        <p>Find your next career opportunity with our comprehensive job board.</p>
        <form action="{% url 'job_board' %}" method="GET" id="job-filter-form">
            <div class="search-bar">
                <input type="text" name="search" placeholder="Search jobs..." value="{{ search_query }}">
                <button type="submit">Search</button>
            </div>
            <div class="filters">
                <select name="job_type">
                    <option value="">All Job Types</option>
                    <option value="full-time" {% if job_type == 'full-time' %}selected{% endif %}>Full-time</option>
                    <option value="part-time" {% if job_type == 'part-time' %}selected{% endif %}>Part-time</option>
                    <option value="internship" {% if job_type == 'internship' %}selected{% endif %}>Internship</option>
                </select>
                <select name="location">
                    <option value="">All Locations</option>
                    <option value="charlotte" {% if location == 'charlotte' %}selected{% endif %}>Charlotte</option>
                    <option value="remote" {% if location == 'remote' %}selected{% endif %}>Remote</option>
                </select>
                <select name="industry">
                    <option value="">All Industries</option>
                    <option value="technology" {% if industry == 'technology' %}selected{% endif %}>Technology</option>
                    <option value="healthcare" {% if industry == 'healthcare' %}selected{% endif %}>Healthcare</option>
                    <option value="finance" {% if industry == 'finance' %}selected{% endif %}>Finance</option>
                </select>
            </div>
        </form>
    </section>

    <section class="job-listings">
        <h3>{{ job_count }} Jobs Found</h3>
        <div class="job-cards">
            {% for job in jobs %}
            <a href="{{ job.link }}" target="_blank" style="text-decoration: none; color: inherit; display: block;">
            <div class="job-card">
                <div class="job-company">
                    <div class="company-logo">{{ job.logo }}</div>
                    <div>
                        <strong>{{ job.company }}</strong>
                        <div style="font-size: 0.8rem; color: #666">{{ job.location }}</div>
                    </div>
                </div>
                <div class="job-details">
                    <h4>{{ job.title }}</h4>
                    <p>{{ job.description }}</p>
                    <p class="job-closing-date">{{ job.closing_date }}</p>
                    <div class="job-tags">
                        <span class="job-tag">{{ job.job_type }}</span>
                        <span class="job-tag">{{ job.field }}</span>
                    </div>
                </div>
            </div>
            {% empty %}
            <p>No jobs found matching your criteria.</p>
            {% endfor %}
        </div>

        <!-- Pagination controls with inline styles -->
        {% if total_pages > 1 %}
        <div style="display: flex; justify-content: center; margin-top: 2rem; gap: 0.5rem; flex-wrap: wrap;">
            {% if has_previous %}
                <a href="?page={{ previous_page }}{% if search_query %}&search={{ search_query }}{% endif %}{% if job_type %}&job_type={{ job_type }}{% endif %}{% if location %}&location={{ location }}{% endif %}{% if industry %}&industry={{ industry }}{% endif %}" style="display: inline-flex; justify-content: center; align-items: center; padding: 0.5rem 1rem; border: 2px solid #e0e0e0; border-radius: 8px; background-color: #f5f5f5; color: #333; text-decoration: none; font-weight: bold; transition: all 0.3s ease; box-shadow: 0 2px 4px rgba(0,0,0,0.05);">&laquo; Previous</a>
            {% endif %}
            
            {% for i in page_range %}
                {% if i == current_page %}
                    <span style="display: inline-flex; justify-content: center; align-items: center; min-width: 2.5rem; height: 2.5rem; padding: 0.5rem; border: 2px solid #005035; border-radius: 8px; background: linear-gradient(135deg, #005035, #003d28); color: white; font-weight: bold; box-shadow: 0 4px 8px rgba(0,0,0,0.15);">{{ i }}</span>
                {% else %}
                    <a href="?page={{ i }}{% if search_query %}&search={{ search_query }}{% endif %}{% if job_type %}&job_type={{ job_type }}{% endif %}{% if location %}&location={{ location }}{% endif %}{% if industry %}&industry={{ industry }}{% endif %}" style="display: inline-flex; justify-content: center; align-items: center; min-width: 2.5rem; height: 2.5rem; padding: 0.5rem; border: 2px solid #e0e0e0; border-radius: 8px; background-color: white; color: #333; text-decoration: none; font-weight: 600; transition: all 0.3s ease; box-shadow: 0 2px 4px rgba(0,0,0,0.05);">{{ i }}</a>
                {% endif %}
            {% endfor %}
            
            {% if has_next %}
                <a href="?page={{ next_page }}{% if search_query %}&search={{ search_query }}{% endif %}{% if job_type %}&job_type={{ job_type }}{% endif %}{% if location %}&location={{ location }}{% endif %}{% if industry %}&industry={{ industry }}{% endif %}" style="display: inline-flex; justify-content: center; align-items: center; padding: 0.5rem 1rem; border: 2px solid #e0e0e0; border-radius: 8px; background-color: #f5f5f5; color: #333; text-decoration: none; font-weight: bold; transition: all 0.3s ease; box-shadow: 0 2px 4px rgba(0,0,0,0.05);">Next &raquo;</a>
            {% endif %}
        </div>
        <p style="text-align: center; color: #333; margin: 1rem 0 2rem 0; font-size: 0.9rem; font-weight: 500;">
            Showing page {{ current_page }} of {{ total_pages }}
        </p>
        {% endif %}

        <div style="text-align: center; margin-top: 1rem;">
            <a href="{% url 'job_board' %}" style="display: inline-block; padding: 0.7rem 1.5rem; background-color: #b3a369; color: #005035; text-decoration: none; font-weight: bold; border-radius: 8px; transition: all 0.3s ease; box-shadow: 0 2px 5px rgba(0,0,0,0.1);">Reset Filters</a>
        </div>
    </section>

    <script>
    // Add hover effects via JavaScript
    document.addEventListener('DOMContentLoaded', function() {
        const paginationLinks = document.querySelectorAll('a[href*="page="]');
        
        paginationLinks.forEach(link => {
            link.addEventListener('mouseover', function() {
                this.style.backgroundColor = '#f5f5f5';
                this.style.color = '#005035';
                this.style.borderColor = '#b3a369';
                this.style.transform = 'translateY(-2px)';
                this.style.boxShadow = '0 4px 8px rgba(0,0,0,0.1)';
            });
            
            link.addEventListener('mouseout', function() {
                const isPaginationButton = this.textContent.includes('Previous') || this.textContent.includes('Next');
                this.style.backgroundColor = isPaginationButton ? '#f5f5f5' : 'white';
                this.style.color = '#333';
                this.style.borderColor = '#e0e0e0';
                this.style.transform = 'none';
                this.style.boxShadow = '0 2px 4px rgba(0,0,0,0.05)';
            });
        });
        
        const resetBtn = document.querySelector('a[href="/job-board/"]');
        if (resetBtn) {
            resetBtn.addEventListener('mouseover', function() {
                this.style.transform = 'translateY(-2px)';
                this.style.boxShadow = '0 4px 8px rgba(0,0,0,0.15)';
                this.style.backgroundColor = '#c2b178';
            });
            
            resetBtn.addEventListener('mouseout', function() {
                this.style.transform = 'none';
                this.style.boxShadow = '0 2px 5px rgba(0,0,0,0.1)';
                this.style.backgroundColor = '#b3a369';
            });
        }
    });
    </script>
{% endblock %}